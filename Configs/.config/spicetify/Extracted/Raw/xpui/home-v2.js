"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7704],{75658:(e,t,s)=>{s.d(t,{E:()=>r});var a=s(50959),n=s(11527);const r=e=>(0,n.jsx)(a.Suspense,{fallback:null,children:(0,a.createElement)((0,a.lazy)((async()=>{const{FeatureActivationSection:e}=await Promise.all([s.e(1814),s.e(9792)]).then(s.bind(s,62714));return{default:e}})),e)})},95928:(e,t,s)=>{s.r(t),s.d(t,{SKELETON_CARDS_COUNT:()=>pe,SKELETON_SHELVES_COUNT:()=>ue,default:()=>he});s(99692);var a=s(50959),n=s(84875),r=s.n(n),i=s(5311),o=s(58665),c=s(80595),l=s(98900),d=s(27293),u=s(87171),p=s(77671),m=s(17262),g=s(82051),h=s(43345),f=s(65909),x=s(50930),y=s(42189),j=s(89936),b=s(82759),v=s(24097),S=s(6401),k=s(74818),w=s(35821),C=s(29482),D=s(30068),_=s(9659),M=s(8258),N=s(3438),E=s(55312);const H="AaXwi9LLckdsxNwrosnQ",I="yX31EzBkHzNooefkSvT3",F="EjJHF7tjFYigQK8pIVbV",A="Z5xLXZofWXGooKRjW6kd",T="kM546dTx5cxDNH530zm8",W="mnhJCpUiriAb7Ay3HOTz",R="rRldspwHsrgo8DsecR2Q";var L=s(11527);const U=({isMWP:e})=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,disablePictureInPicture:!0,className:`${A} ${T}`,"aria-hidden":"true",children:[(0,L.jsx)("source",{src:(0,M.g)(`videos/Sw23-${e?"Mobile":"Desktop"}-Left.webm`),type:"video/webm; codecs=vp09.01.41.08"}),(0,L.jsx)("source",{src:(0,M.g)(`videos/Sw23-${e?"Mobile":"Desktop"}-Left.mp4`),type:"video/mp4"})]}),(0,L.jsxs)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,disablePictureInPicture:!0,className:`${A} ${W}`,"aria-hidden":"true",children:[(0,L.jsx)("source",{src:(0,M.g)(`videos/Sw23-${e?"Mobile":"Desktop"}-Right.webm`),type:"video/webm; codecs=vp09.01.41.08"}),(0,L.jsx)("source",{src:(0,M.g)(`videos/Sw23-${e?"Mobile":"Desktop"}-Right.mp4`),type:"video/mp4"})]})]}),P=({isMWP:e})=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("picture",{children:[(0,L.jsx)("source",{srcSet:(0,M.g)(`images/Sw23-${e?"Mobile":"Desktop"}-Left.webp`),type:"image/webp"}),(0,L.jsx)("source",{srcSet:(0,M.g)(`images/Sw23-${e?"Mobile":"Desktop"}-Left.png`),type:"image/png"}),(0,L.jsx)("img",{className:`${A} ${T}`,src:"",alt:""})]}),(0,L.jsxs)("picture",{children:[(0,L.jsx)("source",{srcSet:(0,M.g)(`images/Sw23-${e?"Mobile":"Desktop"}-Right.webp`),type:"image/webp"}),(0,L.jsx)("source",{srcSet:(0,M.g)(`images/Sw23-${e?"Mobile":"Desktop"}-Right.png`),type:"image/png"}),(0,L.jsx)("img",{className:`${A} ${W}`,src:"",alt:""})]})]}),$=(0,a.forwardRef)((({linkUri:e,loggedIn:t,isMWP:s,isStatic:a=!1,onClick:n},i)=>{const o=(0,N.jh)(),c=(0,E.T)();return(0,L.jsx)("div",{className:H,ref:i,children:(0,L.jsxs)("div",{className:(0,w.Mg)("invertedLight",r()(I,{[F]:s})),children:[a||c?(0,L.jsx)(P,{isMWP:s}):(0,L.jsx)(U,{isMWP:s}),(0,L.jsx)(C.D,{as:"h2",variant:"brio",semanticColor:"textBase",className:R,children:t?l.ag.get("shared.wrapped-banner.title"):l.ag.get("shared.wrapped-banner.title-loggedout")}),(0,L.jsx)(C.D,{as:"p",variant:o===N.Uo.SMALL||s?"mesto":"ballad",semanticColor:"textBase",children:t?l.ag.get("shared.wrapped-banner.body"):l.ag.get("shared.wrapped-banner.body-loggedout")}),(0,L.jsx)(D.D,{colorSet:"invertedDark",iconTrailing:_.T,href:e,target:"_blank",size:o===N.Uo.SMALL||s?"small":"medium",onClick:n,children:l.ag.get("shared.wrapped-banner.button")})]})})}));var q=s(23204);const O=()=>{const e=(0,S.g)(),t=(0,o.W6)(k.bQB),{openURLWithSessionTransfer:s}=(0,q.e)(),{spec:n,logger:r}=(0,y.fU)(v.e,{data:{identifier:"wrapped",uri:"spotify:2023wrapped"}}),i=(0,a.useMemo)((()=>n.campaignFactory({identifier:"wrapped",uri:"spotify:2023wrapped"}).bannerFactory({identifier:"home_wrapped_banner",uri:"desktop_banner"})),[n]),c=(0,y.Wi)(i),l="https://spotify.com/wrapped",d=(0,a.useCallback)((e=>{r.logInteraction(i.hitUiNavigate({destination:l})),s(l),e.preventDefault()}),[r,s,i]);return(0,L.jsx)($,{linkUri:l,loggedIn:!e,onClick:d,ref:c,isStatic:t})};var z=s(64915);const J=JSON.parse('{"uri":"spotify:section:0JQ5DAVAaDNAlq7hOF3StH","data":{"__typename":"HomeYourDJSectionData","title":{"text":"Meet DJ"}},"sectionItems":{"items":[{"uri":"spotify:playlist:37i9dQZF1EYkqdzj48dyYq","content":{"__typename":"PlaylistResponseWrapper","data":{"__typename":"Playlist","uri":"spotify:playlist:37i9dQZF1EYkqdzj48dyYq","name":"DJ","images":{"items":[{"sources":[{"url":"https://lexicon-assets.spotifycdn.com/DJ-Beta-CoverArt-300.jpg","width":null,"height":null}],"extractedColors":{"colorDark":{"hex":"#0858B8","isFallback":false}}}]},"description":"All kinds of music, picked by your own AI DJ.","ownerV2":{"data":{"__typename":"User","name":"Spotify"}}}},"data":null}],"totalCount":1}}');var Q=s(92750),Y=s(94033),B=s(93462),K=(s(95101),s(27396),s(32548),s(48018)),Z=s(16664);const V=({spec:e,section:t,index:s})=>(0,a.useMemo)((()=>t.sectionItems.items.some((e=>(0,Z.d)(e.content)))),[t.sectionItems])?(0,L.jsx)(y.Nh,{spec:e.shelvesFactory(),children:(0,L.jsx)(K.q,{total:t.sectionItems.totalCount,seeAllUri:t.uri,pageId:t.uri,title:t.data.title?.text??"",index:s,id:t.uri,children:t.sectionItems.items.map(Z.x).filter((e=>!!e))})}):null;var X=s(80786);const G=({spec:e,section:t,index:s})=>(0,L.jsx)(y.Nh,{spec:e.shelvesFactory(),children:(0,L.jsx)(X.default,{title:t.data.title?.text??void 0,showAll:!1,index:s})});var ee=s(82614),te=s(75658),se=s(43313);const ae=({spec:e,greeting:t,section:s,index:a})=>{const n=(0,Y._n)();switch(s.data?.__typename){case"HomeGenericSectionData":return(0,L.jsx)(V,{spec:e,section:(0,se.f)(s,s.data),index:a});case"HomeShortsSectionData":return(0,L.jsx)(ee.s,{spec:e,greeting:t,section:(0,se.f)(s,s.data)});case"HomeRecentlyPlayedSectionData":return(0,L.jsx)(G,{spec:e,section:(0,se.f)(s,s.data),index:a});case"HomeFeedBaselineSectionData":case"HomeNativeAdsSectionData":case"HomeOnboardingSectionData":case"HomeOnboardingSectionDataV2":return null;case"HomeYourDJSectionData":{if(!n)return null;const e=(0,se.f)(s,s.data),{data:t,sectionItems:a}=e,r=a.items[0];if("PlaylistResponseWrapper"===r.content.__typename&&"Playlist"===r.content.data.__typename){const{data:e}=r.content;return(0,L.jsx)(Y.KE,{uri:Y.rv,shelfTitle:t.title?.text??"",title:e.name,description:e.description??""})}return null}case"HomeFeatureActivationSectionDataV2":return(0,L.jsx)(te.E,{sectionItems:s.sectionItems.items,uri:s.uri,localStorageKey:s.data.localStorageKey});case"HomeFeatureActivationSectionData":case null:case void 0:return null;default:return(0,B._)(s.data),null}},ne=({spec:e,greeting:t,container:s})=>{const{spec:n,logger:r}=(0,y.fU)(z.createDesktopHomeFeatureActivationShelfEventFactory,{}),i=((e,t)=>t?[e.sections.items[0],J,...e.sections.items.slice(1)]:e.sections.items)(s,(0,o.W6)(k.iiT,{loadingValue:!1}));return(0,a.useEffect)((()=>{(0,Q.wW)()&&r.logImpression(n.impressionElementFactory().impression())}),[n,r]),(0,L.jsx)(L.Fragment,{children:i.map(((s,a)=>(0,L.jsx)(ae,{spec:e,greeting:t,section:s,index:a},`${a}-${s.uri}`)))})};var re=s(20632),ie=s(39359),oe=s(84681),ce=s(24135);const le=()=>(0,o.W6)(k.Jw1)===k.pFI.ONHOME?(0,L.jsx)(ce.w,{children:(0,L.jsx)(oe.M,{onSearch:!1})}):null;var de=s(75748);const ue=6,pe=6,me=(0,a.memo)((({shelfCount:e,cardCount:t})=>(0,L.jsx)("section",{"data-testid":"home-page",children:(0,L.jsx)("div",{className:de.Z.home,children:(0,L.jsxs)("div",{className:r()(de.Z.content,"contentSpacing"),children:[(0,L.jsx)(u.H,{withTitle:!1}),[...new Array(e).keys()].map(((e,s)=>(0,L.jsx)(re.e,{withTitle:!0,cardCount:t},s)))]})})}))),ge=({spec:e})=>{(0,m.z)("home");const{subfeedId:t=null}=(0,i.UO)(),{data:s,error:a,fetching:n}=(0,j.b3)({timeZone:(0,b.UE)(),sp_t:(0,f.vQ)("sp_t")??"",facet:t},{cacheTime:b.us,staleTime:b.fS}),c=(0,o.W6)(k._dp),d=(0,o.W6)(k.bQB),u=c||d;if(n)return(0,L.jsx)(me,{shelfCount:ue,cardCount:pe});if(null!==a)return(0,L.jsx)(p.h,{hasError:!0,errorMessage:l.ag.get("error.generic")});const g=s?.home;return"HomeResponsePayload"!==g?.__typename||0===g.sectionContainer.sections.totalCount||0===g.sectionContainer.sections.items.length?(0,L.jsx)(p.h,{hasError:!0,errorMessage:l.ag.get("error.generic")}):(0,L.jsx)("section",{"data-testid":"home-page",children:(0,L.jsx)("div",{className:de.Z.home,children:(0,L.jsxs)("div",{className:r()(de.Z.content,"contentSpacing"),children:[u&&(0,L.jsx)(O,{}),(0,L.jsx)(ne,{spec:e,greeting:g.greeting?.text??null,container:g.sectionContainer})]})})})},he=()=>{const{spec:e}=(0,y.fU)(c.F,{data:{identifier:"home",uri:"spotify:home"}}),t=(0,o.W6)(k.ygs),s=(0,h.S)(t),n=(0,ie.k)({type:"locale",uri:"home"});return(0,L.jsx)(y.Nh,{spec:e,children:(0,L.jsxs)(g.q,{config:s,children:[(0,L.jsx)(d.$,{children:(0,x.nW)({i18n:l.ag,shouldLocalize:n})}),(0,L.jsx)(a.Suspense,{fallback:null,children:(0,L.jsx)(le,{})}),(0,L.jsx)(ge,{spec:e})]})})}},84681:(e,t,s)=>{s.d(t,{M:()=>N});var a=s(50959),n=s(84875),r=s.n(n),i=s(40587),o=s(5311),c=s(49857),l=s(17599),d=s(29482),u=s(91027),p=s(7769),m=s(81018),g=s(38762),h=s(98900),f=s(47693),x=s(51825),y=s(42189),j=s(4844),b=s(189);const v="main-topBar-searchBar",S="x-searchInput-searchInputSearchIcon",k="x-searchInput-searchInputInput",w="x-searchInput-searchInputOnSearch",C="x-searchInput-searchInputClearButton",D="x-searchInput-searchInputIconContainer",_="x-searchInput-searchInputClearIcon";var M=s(11527);const N=a.memo((function({isSearchChipsEnabled:e=!1,onSearch:t=!0,onClick:s}){const n=(0,o.TH)(),N=(0,o.s0)(),E=(0,a.useRef)(null),H=(0,a.useRef)(null),I=(0,i.I0)(),[{category:F,query:A},T]=(0,b.l)(),[W,R]=(0,a.useState)(A),L=!!F,U=(0,x.Mi)(),P=n.pathname.startsWith("/recent-searches"),$=L||P,{spec:q,logger:O}=(0,y.fU)(m.createDesktopSearchInputEventFactory,{}),z=(0,c.y1)(((t,s,a)=>{let n;if(a){const{interactionId:e}=O.logInteraction(a);n=e}e?T(t,F,!1,n):T(t,null,s,n),U.current&&(U.current.scrollTop=0)}),200),J=(0,a.useCallback)(((e=!1)=>{E.current!==document.activeElement&&(H.current=document.activeElement,E.current&&E.current.focus()),e&&E.current?.select()}),[]);(0,f.eY)(f.O4.SHOW_SEARCH,(()=>J(!0)));const Q=n.pathname.startsWith("/search");(0,a.useEffect)((()=>{!$&&t&&Q&&(e&&A||J())}),[A,J,n.key,t,Q,$,e]),(0,a.useEffect)((()=>{Q||R("")}),[Q,A]);return(0,M.jsxs)("div",{className:r()(v,{[w]:!t}),children:[(0,M.jsx)("form",{onSubmit:e=>{e.preventDefault(),W&&O.logInteraction(q.keyStrokeSearch());const t=(0,g.EC)(W);if(t?.type===g.JM.AD){const e=(0,g.HB)(t.id);if(t.id===e)return;I((0,j.HI)(t.id))}else t?N(t.toURLPath(!0),{state:{preventMoveFocus:!0}}):W||N("/search",{state:{preventMoveFocus:!0}});W&&U.current?.querySelector("h1, h2, h3, h4")?.focus()},role:"search",children:(0,M.jsx)(d.D,{variant:"mesto",as:"input",style:{color:l.Snx},ref:E,className:r()(k),value:W,maxLength:800,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,onChange:e=>{const t=e.currentTarget.value,s=q.keyStrokeChangeSearchQuery({searchQueryString:t});R(t),z(t,$,s)},onKeyDown:e=>{if("Escape"===e.key)if(W){const e=q.hitTextClear();R(""),z("",$,e)}else E.current&&E.current.blur(),H.current instanceof HTMLElement&&H.current.focus()},placeholder:t?h.ag.get("search.search-for-label"):h.ag.get("navbar.search"),onFocus:()=>{e||!$&&t||z(W,$,null)},"data-testid":"search-input",onClick:s})}),(0,M.jsxs)("div",{className:D,children:[(0,M.jsx)("span",{className:S,children:(0,M.jsx)(u.j,{className:_,"aria-hidden":!0,iconSize:16})}),W&&(0,M.jsx)("button",{className:C,onClick:()=>{E.current&&E.current.focus();const e=q.hitTextClear();R(""),z("",$,e)},"aria-label":h.ag.get("search.a11y.clear-input"),children:(0,M.jsx)(p.k,{className:_,iconSize:16})})]})]})}))},6499:(e,t,s)=>{s.d(t,{Pd:()=>i,Wm:()=>r,i9:()=>n});var a=s(98900);const n=["artists","albums","episodes","genres","playlists","podcasts","audiobooks","tracks","users","topResults","podcastAndEpisodes"],r={artists:()=>a.ag.get("search.title.artists"),albums:()=>a.ag.get("search.title.albums"),playlists:()=>a.ag.get("search.title.playlists"),podcasts:()=>a.ag.get("search.title.shows"),episodes:()=>a.ag.get("search.title.episodes"),audiobooks:()=>a.ag.get("search.title.audiobooks"),users:()=>a.ag.get("search.title.profiles"),genres:()=>a.ag.get("search.title.genres-and-moods"),tracks:()=>a.ag.get("search.title.tracks"),podcastAndEpisodes:()=>a.ag.get("search.title.podcast-and-shows"),topResults:()=>a.ag.get("search.row.top-results")},i=["artists","albums","playlists","podcasts","episodes","audiobooks","users","genres"]},189:(e,t,s)=>{s.d(t,{l:()=>o});s(95101),s(42826);var a=s(50959),n=s(5311),r=s(6499);const i=e=>r.i9.find((t=>t===e));function o(){const e=(0,n.s0)(),t=(0,n.bS)("/search/:query"),s=(0,n.bS)("/search/:query/:category"),r=(0,a.useCallback)((function(t,s,a,n){const r=n?{interactionId:n,preventMoveFocus:!0}:{preventMoveFocus:!0},i=["/search"];t&&(i.push(encodeURIComponent(t)),s&&i.push(s));const o=i.join("/");e(o,a?{state:r}:{state:r,replace:!0})}),[e]);return[{query:function(e){try{return decodeURIComponent(e)}catch{return e}}(t?.params.query??s?.params?.query??""),category:i(s?.params.category)},r]}}}]);
//# sourceMappingURL=home-v2.js.map